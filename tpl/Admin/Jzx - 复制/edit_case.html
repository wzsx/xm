<html>
    
    <head>
    </head>
    
    <body>
        <extend name="Public:base" />
        <block name="title">
            修改订单
        </block>
        <block name="css">
            <icheckcss />
        </block>
        <block name="content">
            <div class="page-header">
                <h1>
                    <i class="fa fa-home">
                    </i>
                    首页 &gt; 订单管理 &gt; 修改订单
                </h1>
            </div>
            <div class="col-xs-12">
                <div class="tabbable">
                    <ul class="nav nav-tabs padding-12 tab-color-blue background-blue" id="myTab">
                        <li>
                            <a href="{:U('Admin/Jzx/index')}">
                                订单列表
                            </a>
                        </li>
                        <li class="active">
                            <a href="{:U('Admin/Jzx/add_case')}">
                                添加订单
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <form class="form-inline" method="post" action="{:U('Admin/Jzx/edit_case')}">
                            <input type="hidden" name="id" value="{$data.id}"></input>
                            <table class="table table-striped table-bordered table-hover table-condensed">
                                <tbody>
                                    <tr>
                                        <th class="center">
                                            基本信息
                                        </th>
                                        <td>
                                            收货姓名&nbsp;&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="name" value="{$data.name}" />&nbsp;&nbsp;&nbsp;&nbsp;
                                            收货电话&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="phone" value="{$data.phone}" />&nbsp;&nbsp;
                                             <span class="inputword">
                                                男
                                            </span>
                                            <input class="xb-icheck" type="radio" name="sex" value="1" <eq name="data['sex']" value="1"> checked="checked"
                                            </eq> >
                                            <span class="inputword">
                                                女
                                            </span>
                                            <input class="xb-icheck" type="radio" name="sex" value="2" <eq name="data['sex']" value="2"> checked="checked"
                                            </eq> ><br/><br/>

                                            订单总额&nbsp;&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="all_money" value="{$data.all_money}" />&nbsp;&nbsp;&nbsp;&nbsp;
                                            预付定金&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="prepaid_money" value="{$data.prepaid_money}" />
                                            &nbsp;&nbsp;快递代收金额&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="collection_money" value="{$data.collection_money}" />&nbsp;&nbsp;<br/><br/>
                                            付款方式&nbsp;&nbsp;&nbsp;
                                            <span class="inputword">
                                                微信
                                            </span>
                                            <input class="xb-icheck" type="radio" name="pay_order" value="1" <eq name="data['pay_order']" value="1"> checked="checked"
                                            </eq> />
                                            <span class="inputword">
                                                支付宝
                                            </span>
                                            <input class="xb-icheck" type="radio" name="pay_order" value="2" <eq name="data['pay_order']" value="2"> checked="checked"
                                            </eq> />
                                            <span class="inputword">
                                                银行卡
                                            </span>
                                            <input class="xb-icheck" type="radio" name="pay_order" value="3" <eq name="data['pay_order']" value="3"> checked="checked"
                                            </eq> />
                                            <span class="inputword">
                                                现金
                                            </span>
                                            <input class="xb-icheck" type="radio" name="pay_order" value="4" <eq name="data['pay_order']" value="4"> checked="checked"
                                            </eq> />
                                            （定金）
                                        </td>
                                    </tr>


                                    <tr>
                                        <th class="center">
                                            订单信息
                                        </th>
                                        <td>
                                            <div id="for_a">
                                                <input type="hidden" name="ord_id" value="{$data.id}">
                                            <volist name="pro_info" id="val">
                                                <div>
                                                    <input type="hidden" name="proinfo[{$val.id}][id]" value="{$val.id}">
                                                    产品信息&nbsp;&nbsp;&nbsp;
                                                    <input class="input-medium" type="text" name="proinfo[{$val.id}][pro_info]" placeholder="" style="width:320px;" value="{$val.pro_info}" />
                                                    &nbsp;&nbsp;&nbsp;数量&nbsp;&nbsp;&nbsp;
                                                    <select name="proinfo[{$val.id}][num]">
                                                      <option value="1" <eq name="val.num" value="1"> selected="selected" </eq>>1</option>
                                                      <option value="2" <eq name="val.num" value="2"> selected="selected" </eq>>2</option>
                                                      <option value="3" <eq name="val.num" value="3"> selected="selected" </eq>>3</option>
                                                      <option value="4" <eq name="val.num" value="4"> selected="selected" </eq>>4</option>
                                                      <option value="5" <eq name="val.num" value="5"> selected="selected" </eq>>5</option>
                                                      <option value="6" <eq name="val.num" value="6"> selected="selected" </eq>>6</option>
                                                      <option value="7" <eq name="val.num" value="7"> selected="selected" </eq>>7</option>
                                                      <option value="8" <eq name="val.num" value="8"> selected="selected" </eq>>8</option>
                                                      <option value="9" <eq name="val.num" value="9"> selected="selected" </eq>>9</option>
                                                      <option value="10" <eq name="val.num" value="10"> selected="selected" </eq>>10</option>
                                                      <option value="-1" <eq name="val.num" value="-1"> selected="selected" </eq>>-1</option>
                                                      <option value="-2" <eq name="val.num" value="-2"> selected="selected" </eq>>-2</option>
                                                      <option value="-3" <eq name="val.num" value="-3"> selected="selected" </eq>>-3</option>
                                                      <option value="-4" <eq name="val.num" value="-4"> selected="selected" </eq>>-4</option>
                                                      <option value="-5" <eq name="val.num" value="-5"> selected="selected" </eq>>-5</option>
                                                      <option value="-6" <eq name="val.num" value="-6"> selected="selected" </eq>>-6</option>
                                                      <option value="-7" <eq name="val.num" value="-7"> selected="selected" </eq>>-7</option>
                                                      <option value="-8" <eq name="val.num" value="-8"> selected="selected" </eq>>-8</option>
                                                      <option value="-9" <eq name="val.num" value="-9"> selected="selected" </eq>>-9</option>
                                                      <option value="-10" <eq name="val.num" value="-10"> selected="selected" </eq>>-10</option>
                                                    </select>

                                                    &nbsp;&nbsp;&nbsp;规格&nbsp;&nbsp;&nbsp;
                                                    <select name="proinfo[{$val.id}][guige]">
                                                      <option value="盒" <eq name="val.guige" value="盒"> selected="selected" </eq>>盒</option>
                                                      <option value="瓶" <eq name="val.guige" value="瓶"> selected="selected" </eq>>瓶</option>
                                                      <option value="包" <eq name="val.guige" value="包"> selected="selected" </eq>>包</option>
                                                      <option value="个" <eq name="val.guige" value="个"> selected="selected" </eq>>个</option>
                                                      <option value="副" <eq name="val.guige" value="副"> selected="selected" </eq>>副</option>
                                                      <option value="袋" <eq name="val.guige" value="袋"> selected="selected" </eq>>袋</option>
                                                    </select>

                                                    <a href="#" class="add_a" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">+</a>
                                                    <a href="#" class="del_a" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">-</a>
                                                     <br/><br/>
                                                </div>
                                            </volist>
                                            </div>

                                            <div id="for_a_zp">
                                                <input type="hidden" name="ord_id" value="{$data.id}">
                                            <volist name="zp_info" id="val">
                                                <div>
                                                    <input type="hidden" name="zpinfo[{$val.id}][id]" value="{$val.id}">
                                                    赠品信息&nbsp;&nbsp;&nbsp;
                                                    <input class="input-medium" type="text" name="zpinfo[{$val.id}][zp_info]" placeholder="" style="width:320px;" value="{$val.zp_info}" />
                                                    &nbsp;&nbsp;&nbsp;数量&nbsp;&nbsp;&nbsp;
                                                    <select name="zpinfo[{$val.id}][num]">
                                                      <option value=""></option>
                                                      <option value="1" <eq name="val.num" value="1"> selected="selected" </eq>>1</option>
                                                      <option value="2" <eq name="val.num" value="2"> selected="selected" </eq>>2</option>
                                                      <option value="3" <eq name="val.num" value="3"> selected="selected" </eq>>3</option>
                                                      <option value="4" <eq name="val.num" value="4"> selected="selected" </eq>>4</option>
                                                      <option value="5" <eq name="val.num" value="5"> selected="selected" </eq>>5</option>
                                                      <option value="6" <eq name="val.num" value="6"> selected="selected" </eq>>6</option>
                                                      <option value="7" <eq name="val.num" value="7"> selected="selected" </eq>>7</option>
                                                      <option value="8" <eq name="val.num" value="8"> selected="selected" </eq>>8</option>
                                                      <option value="9" <eq name="val.num" value="9"> selected="selected" </eq>>9</option>
                                                      <option value="10" <eq name="val.num" value="10"> selected="selected" </eq>>10</option>
                                                      <option value="-1" <eq name="val.num" value="-1"> selected="selected" </eq>>-1</option>
                                                      <option value="-2" <eq name="val.num" value="-2"> selected="selected" </eq>>-2</option>
                                                      <option value="-3" <eq name="val.num" value="-3"> selected="selected" </eq>>-3</option>
                                                      <option value="-4" <eq name="val.num" value="-4"> selected="selected" </eq>>-4</option>
                                                      <option value="-5" <eq name="val.num" value="-5"> selected="selected" </eq>>-5</option>
                                                    </select>

                                                    &nbsp;&nbsp;&nbsp;规格&nbsp;&nbsp;&nbsp;
                                                    <select name="zpinfo[{$val.id}][guige]">
                                                      <option value="盒" <eq name="val.guige" value="盒"> selected="selected" </eq>>盒</option>
                                                      <option value="瓶" <eq name="val.guige" value="瓶"> selected="selected" </eq>>瓶</option>
                                                      <option value="包" <eq name="val.guige" value="包"> selected="selected" </eq>>包</option>
                                                      <option value="个" <eq name="val.guige" value="个"> selected="selected" </eq>>个</option>
                                                      <option value="副" <eq name="val.guige" value="副"> selected="selected" </eq>>副</option>
                                                      <option value="袋" <eq name="val.guige" value="袋"> selected="selected" </eq>>袋</option>
                                                    </select>

                                                    <a href="#" class="add_a_zp" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">+</a>
                                                    <a href="#" class="del_a_zp" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">-</a>
                                                     <br/><br/>
                                                </div>
                                            </volist>
                                            </div>

                                            订单类型&nbsp;&nbsp;&nbsp;
                                            <span class="inputword">
                                                首单
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="1" <eq name="data['order_type']" value="1"> checked="checked"
                                            </eq>  />
                                            
                                            <span class="inputword">
                                                复购一
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="2" <eq name="data['order_type']" value="2"> checked="checked"
                                            </eq> />
                                            
                                            <span class="inputword">
                                                复购二
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="3" <eq name="data['order_type']" value="3"> checked="checked"
                                            </eq> />
                                            
                                            <span class="inputword">
                                                复购三
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="4" <eq name="data['order_type']" value="4"> checked="checked"
                                            </eq> />
                                            
                                            <span class="inputword">
                                                复购四
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="5" <eq name="data['order_type']" value="5"> checked="checked"
                                            </eq> />
                                            
                                            <span class="inputword">
                                                复购五
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="6" <eq name="data['order_type']" value="6"> checked="checked"
                                            </eq> />

                                            <span class="inputword">
                                                退货
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="7" <eq name="data['order_type']" value="7"> checked="checked"
                                            </eq> />

                                            <span class="inputword">
                                                退货
                                            </span>
                                            <input class="xb-icheck" type="radio" name="order_type" value="8" <eq name="data['order_type']" value="8"> checked="checked"
                                            </eq> />

                                            <br/><br/>

                                            收货地址&nbsp;&nbsp;&nbsp;
                                            
                                            <select name="province" id="province" onchange="loadRegion('province',2,'city','{:U('Jzx/getRegion')}');">
                                                <option value="0" selected>{$data.province}</option>
                                                <volist name="province" id="vo">
                                                    <option value="{$vo.id}">{$vo.name}</option>
                                                </volist>
                                            </select>
                                            
                                            <select name="city" id="city"  onchange="loadRegion('city',3,'town','{:U('Jzx/getRegion')}');">
                                              <option value="{$data.city}">{$data.city}</option>
                                            </select>
                                            
                                            <select name="town" id="town">
                                              <option value="{$data.town}">{$data.town}</option>
                                            </select><br/><br/>
                                            
                                            详细地址&nbsp;&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="address" value="{$data.address}" style="width:620px;" /><br/><br/>
                                            备注&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <textarea cols="150" rows="10" wrap="hard" name="content">{$data.content}</textarea>
                                        </td>
                                    </tr>
                                    <tr>
                                    <th class="center">
                                            其他&nbsp;&nbsp;&nbsp;
                                        </th>
                                        <td>
                                            记录人&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="write_name" value="{$data.write_name}" />&nbsp;&nbsp;&nbsp;&nbsp;
                                            微信号&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <input class="input-medium" type="text" name="write_wx" value="{$data.write_wx}" />&nbsp;&nbsp;&nbsp;&nbsp;
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>
                                        </th>
                                        <td>
                                            <input class="btn btn-success" type="submit" value="添加" />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </form>
                    </div>
                </div>
            </div>
        </block>
        <block name="js">
            <icheckjs color="blue" />
        </block>
    </body>

</html>

<block name="js">
<script>

function loadRegion(sel,type_id,selName,url){
    jQuery("#"+selName+" option").each(function(){
        jQuery(this).remove();
    });
    jQuery("<option value=0>请选择</option>").appendTo(jQuery("#"+selName));
    if(jQuery("#"+sel).val()==0){
        return;
    }
    jQuery.getJSON(url,{pid:jQuery("#"+sel).val(),type:type_id},
        function(data){
            if(data){
                jQuery.each(data,function(idx,item){
                    jQuery("<option value="+item.id+">"+item.name+"</option>").appendTo(jQuery("#"+selName));
                });
            }else{
                jQuery("<option value='0'>请选择</option>").appendTo(jQuery("#"+selName));
            }
        }
    );
}

</script>

<script type="text/javascript">
 var n =0;
$(document).on("click",".add_a",function (e) {
  n++;
    e.preventDefault();
    $("#for_a").append(`
                        <div>产品信息&nbsp;&nbsp;&nbsp;
                            <input class="input-medium" type="text" name="proinfo[${n}][pro_info]" placeholder="" style="width:320px;" />

                            &nbsp;&nbsp;&nbsp;数量&nbsp;&nbsp;&nbsp;
                            <select name="proinfo[${n}][num]">
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                              <option value="5">5</option>
                              <option value="6">6</option>
                              <option value="7">7</option>
                              <option value="8">8</option>
                              <option value="9">9</option>
                              <option value="10">10</option>
                              <option value="-1">-1</option>
                              <option value="-2">-2</option>
                              <option value="-3">-3</option>
                              <option value="-4">-4</option>
                              <option value="-5">-5</option>
                              <option value="-6">-6</option>
                              <option value="-7">-7</option>
                              <option value="-8">-8</option>
                              <option value="-9">-9</option>
                              <option value="-10">-10</option>
                            </select>

                            &nbsp;&nbsp;&nbsp;规格&nbsp;&nbsp;&nbsp;
                            <select name="proinfo[${n}][guige]">
                              <option value="盒">盒</option>
                              <option value="瓶">瓶</option>
                              <option value="包">包</option>
                              <option value="个">个</option>
                              <option value="副">副</option>
                              <option value="袋">袋</option>
                            </select>
                            <a href="#" class="add_a" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">+</a>
                            <a href="#" class="del_a" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">-</a>
                             <br/><br/></div>
    `);
});
$(document).on("click",".del_a",function (e) {
    e.preventDefault();
    // $(this).parent().parent().prev().remove();
    $(this).parent().remove();
})
</script>




<script type="text/javascript">
 var n =0;
$(document).on("click",".add_a_zp",function (e) {
  n++;
    e.preventDefault();
    $("#for_a_zp").append(`
                        <div>赠品信息&nbsp;&nbsp;&nbsp;
                            <input class="input-medium" type="text" name="zpinfo[${n}][zp_info]" placeholder="" style="width:320px;" />

                            &nbsp;&nbsp;&nbsp;数量&nbsp;&nbsp;&nbsp;
                            <select name="zpinfo[${n}][num]">
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                              <option value="5">5</option>
                              <option value="6">6</option>
                              <option value="7">7</option>
                              <option value="8">8</option>
                              <option value="9">9</option>
                              <option value="10">10</option>
                              <option value="-1">-1</option>
                              <option value="-2">-2</option>
                              <option value="-3">-3</option>
                              <option value="-4">-4</option>
                              <option value="-5">-5</option>

                            </select>

                            &nbsp;&nbsp;&nbsp;规格&nbsp;&nbsp;&nbsp;
                            <select name="zpinfo[${n}][guige]">
                              <option value="盒">盒</option>
                              <option value="瓶">瓶</option>
                              <option value="包">包</option>
                              <option value="个">个</option>
                              <option value="副">副</option>
                              <option value="袋">袋</option>
                            </select>
                            <a href="#" class="add_a_zp" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">+</a>
                            <a href="#" class="del_a_zp" style="padding: 5px 15px ;text-decoration:none;color: red ;border: 1px solid red;display: inline-block">-</a>
                             <br/><br/></div>
    `);
});
$(document).on("click",".del_a_zp",function (e) {
    e.preventDefault();
    // $(this).parent().parent().prev().remove();
    $(this).parent().remove();
})
</script>

</block>